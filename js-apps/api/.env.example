# ==============================================
# 1. 源变量 (Raw Sources)
# 约定：留空 = 必须从 AWS Parameter Store 拉取
# ==============================================

# 应用端口（Caddy 期望所有服务在 3000 端口）
PORT=3000

# 数据库凭证 (AWS 存)
COMMON_POSTGRES_APP_USER=
COMMON_POSTGRES_APP_USER_PASSWORD=



# Redis 凭证 (AWS 存)
COMMON_REDIS_PASSWORD=

# ==============================================
# 2. 计算变量 (Computed Logic)
# ==============================================

# Host 配置
DB_HOST=${CTX_PG_HOST:-localhost}
REDIS_HOST=${CTX_REDIS_HOST:-localhost}

# 数据库名（带分支后缀）
POSTGRES_DB=api_demo${CTX_DB_SUFFIX:-}

# Public URL（使用目录名作为子域名，双中划线分隔）
# Local:   https://api-demo.local.owenyoung.com
# Preview: https://api-demo--feat-test.preview.owenyoung.com
# Prod:    https://api-demo.owenyoung.com
PUBLIC_URL=https://api-demo${CTX_DNS_SUFFIX:-}.${CTX_ROOT_DOMAIN:-local.owenyoung.com}

# 连接字符串
DATABASE_URL=postgresql://${COMMON_POSTGRES_APP_USER}:${COMMON_POSTGRES_APP_USER_PASSWORD}@${DB_HOST}:5432/${POSTGRES_DB}
REDIS_URL=redis://default:${COMMON_REDIS_PASSWORD}@${REDIS_HOST}:6379
